<dom-module id="x-app">
  <style>
    .toolbar {
      background-color: var(--dark-primary-color);
    }
    .title {
      @apply(--app-toolbar-title-theme)
    }
    .card {
      margin: 8px;
      padding: 8px;
      min-width: 200px;
      height: 200px;
    }
  </style>
  <template>

    <paper-header-panel class="fit">

      <paper-toolbar class="toolbar">
        <div class="title">Yeti 575</div>
        <span class="flex"></span>
        <div>more?</div>
      </paper-toolbar>

      <div class="container fit">
      </div>

    </paper-header-panel>

    <iron-ajax
        id="files_request"
        auto
        url="/file"
        handle-as="json"
        on-response="handleResponse">
    </iron-ajax>

  </template>
</dom-module>

<script>
  (function(Polymer) {

    Polymer({
      is: 'x-app',

      properties: {
        files: {
          type: Array
        },
        displayName: {
          type: String
        }
      },

      ready: function() {
      },

      handleResponse: function(e, request) {
        this.files = request.response
      },

      submitForm: function() {
        var formData = new FormData();

        // Add the display name
        formData.append("displayName", this.displayName);

        // Add files to the form data
        for (var i = 0; i < this.files.length; i++) {
          formData.append('datafile-' + i, this.files[i]);
        }

        // Create the request
        var request = new XMLHttpRequest();
        request.open('POST', '/file');
        request.send(formData);
      }
    });

  }(Polymer));
</script>